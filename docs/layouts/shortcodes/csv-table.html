{{ $file := .Get "file" }}
{{ $data := slice }}
{{ with or ($.Page.Resources.Get $file) (resources.Get $file) }}
  {{ $csv := .Content }}
  {{ $data = $csv | transform.Unmarshal }}
{{ end }}

{{ with $data }}
<table>
  <thead>
    <tr>
      {{ range index . 0 }}
        <th>{{ . }}</th>
      {{ end }}
    </tr>
  </thead>
  <tbody>
    {{ range after 1 . }}
      <tr>
        {{ range . }}
          <td>{{ . }}</td>
        {{ end }}
      </tr>
    {{ end }}
  </tbody>
</table>
{{ else }}
<p>No data found for file: {{ $file }}</p>
{{ end }}
